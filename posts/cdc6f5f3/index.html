<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>使用 GitHub Actions 自动部署 Hexo 博客 | Kiyan&#39;s Blog</title>
<meta name="keywords" content="教程, GitHub Actions, Hexo">
<meta name="description" content="本文章通过使用 GitHub Actions 自动将博客源文件部署到 GitHub Pages，并在 Actions 中主动调用 Cloudflare Pages 部署挂钩，来避免一些不必要的部署。">
<meta name="author" content="Kiyan">
<link rel="canonical" href="https://kiyanyang.github.io/posts/cdc6f5f3/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.afe2af48343daf380a85c67259d71fa913dd9c727e32da85a22abd76258d78e2.css" integrity="sha256-r&#43;KvSDQ9rzgKhcZyWdcfqRPdnHJ&#43;MtqFoiq9diWNeOI=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kiyanyang.github.io/img/favicon.webp">
<link rel="icon" type="image/png" sizes="16x16" href="https://kiyanyang.github.io/img/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kiyanyang.github.io/img/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://kiyanyang.github.io/img/apple-touch-icon.png">
<link rel="mask-icon" href="https://kiyanyang.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link crossorigin="anonymous" href="/assets/scss/bundle.0ec710400a831bb40b6b07529f52d0110cefede1e311a7afc8c83234f49cea8f.css" integrity="sha256-DscQQAqDG7QLawdSn1LQEQzv7eHjEaevyMgyNPSc6o8=" rel="preload stylesheet" as="style">


<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200..900&amp;family=Noto&#43;Sans&#43;SC:wght@400;500;700&amp;display=swap" as="style" onload="this.onload=null;this.rel='stylesheet';" crossorigin>
<script defer src="https://lib.baomitu.com/twitter-bootstrap/5.2.3/js/bootstrap.min.js" crossorigin="anonymous"></script>
<script defer src="https://lib.baomitu.com/waline/2.14.8/pageview.min.js" crossorigin="anonymous" onload="Waline.pageviewCount({serverURL: 'https:\/\/waline.dotvast.cc\/'});"></script>
<meta property="og:title" content="使用 GitHub Actions 自动部署 Hexo 博客" />
<meta property="og:description" content="本文章通过使用 GitHub Actions 自动将博客源文件部署到 GitHub Pages，并在 Actions 中主动调用 Cloudflare Pages 部署挂钩，来避免一些不必要的部署。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kiyanyang.github.io/posts/cdc6f5f3/" />
<meta property="og:image" content="https://kiyanyang.github.io/posts/cdc6f5f3/index.webp" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-18T19:17:06+08:00" />
<meta property="article:modified_time" content="2023-03-04T18:11:41+08:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://kiyanyang.github.io/posts/cdc6f5f3/index.webp" />
<meta name="twitter:title" content="使用 GitHub Actions 自动部署 Hexo 博客"/>
<meta name="twitter:description" content="本文章通过使用 GitHub Actions 自动将博客源文件部署到 GitHub Pages，并在 Actions 中主动调用 Cloudflare Pages 部署挂钩，来避免一些不必要的部署。"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "文章",
      "item": "https://kiyanyang.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "使用 GitHub Actions 自动部署 Hexo 博客",
      "item": "https://kiyanyang.github.io/posts/cdc6f5f3/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "使用 GitHub Actions 自动部署 Hexo 博客",
  "name": "使用 GitHub Actions 自动部署 Hexo 博客",
  "description": "本文章通过使用 GitHub Actions 自动将博客源文件部署到 GitHub Pages，并在 Actions 中主动调用 Cloudflare Pages 部署挂钩，来避免一些不必要的部署。",
  "keywords": [
    "教程", "GitHub Actions", "Hexo"
  ],
  "articleBody": "注意：本站已迁移至 Hugo。请访问本站「历史节点」获取有关 Hexo 的内容。\n本文章通过使用 GitHub Actions 自动将博客源文件部署到 GitHub Pages。此外还可以在 Actions 中主动调用 Cloudflare Pages 部署挂钩，来避免一些不必要的部署。\n前置条件 GitHub 账号 Cloudflare 账号 Hexo 博客源文件 创建 GitHub Pages 这里简要描述一下步骤：\n新建仓库 .github.io，如果用户名包含大写字母，则必须改为小写字母。 选择仓库可见性为 public。 选择 Initialize this repository with a README（使用自述文件初始化此仓库）。 单击 Create repository（创建仓库）。 详细步骤可以查看 GitHub 文档“创建 GitHub Pages 站点”。\n创建博客源代码仓库 有两种方式：\n在 .gitbub.io 仓库（即上面创建的 GitHub Pages 站点仓库），新建分支 source，然后将博客源文件上传至此分支。 新建仓库（此仓库的可见性可以设为 private），名称任意，比如 .gitbub.io.source，然后将博客源文件上传至此分支。 我选择了第二种方式（因为源仓库可以设为 private），后续代码也依据第二种方式，不过可以很容易修改得到第一种方式的代码。\n编写 GitHub Actions 这里仅简单讲述一下相关的内容，更多关于 GitHub Actions 的内容请查看“官方文档”等。\n在 Hexo 源文件的根目录，新建 .github/workflows/.yml 文件，文件名任意，比如 deploy-pages。\nYAML 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 # 任务名称：任意 name: Deploy Blog Pages # 触发条件 on: # push，也就是推送到仓库时才执行任务 push: # 分支，这里选择 main，也就是只有推送到 main 分支时才执行任务【可选】 branches: - main # 忽略路径，也就是当只有这些路径发生变更时不会执行任务【可选】 paths-ignore: - \".github/**\" - \"scaffolds/**\" - \"source/_drafts/**\" # 任务 jobs: # 任务名称，任意 build-and-deploy: # 服务器环境：最新版 Ubuntu runs-on: ubuntu-latest steps: # 拉取 - name: 📦 Checkout uses: actions/checkout@v2 # 生成静态文件 - name: 🔧 Install and Build run: | npm ci npm run build # 如果采用 yarn 进行包管理，则使用下面的代码 # yarn # yarn build # 部署到 GitHub Pages - name: 🚀 Deploy uses: JamesIves/github-pages-deploy-action@releases/v4 with: # GitHub 的 Personal access token token: ${{secrets.PAT}} # 更换为自己的 /.github.io repository-name: kiyanyang/kiyanyang.github.io # 要部署到的分支 branch: main # 上一步生成的静态文件的地址 folder: public 在“🚀 Deploy”步骤中，我们使用 Marketplace Actions 中的“Deploy to GitHub Pages”来部署到 GitHub Pages。其中需要 Personal access token，下面是获取步骤。\n在“Personal access tokens”页面点击右上角的 Generate new token 来生成一个新的 token，在生成页面的 Select scopes 中选择 workflow。注意要将生成的 token 保存好，因为只会在生成时显示一次，之后将无法查看。\n在博客源文件仓库的设置中打开 Secrets 页面。\n点击右上角 new repository secret 按钮来新建环境变量。\n变量的名称为 PAT（也可以为其他名称，但是要和“🚀 Deploy”步骤中的 token 的值内变量名称保持一致）。 变量的内容为上面生成的“Personal access tokens”。 至此使用 GitHub Actions 自动将博客源文件部署到 GitHub Pages 就完成了，可以将自己将源文件上传查看效果。\n部署 Cloudflare Pages 点击 Cloudflare Pages，转到 Pages（页面）\u003e Create a project（创建项目）。\n选择 GitHub 上你的博客源文件仓库。 配置和部署 Project name（项目名称）：任意，此名称即为 Cloudflare Pages 的前缀，比如我的是 kiyanyang。 Production branch（生产分支）：一般为 main 或 master，也就是你博客源文件所处的分支。 Framework perset（框架预设）：选择 None。 Build command（构建命令）：npm run build 或 yarn build 按需选择一个。 Build output directory（构建输出目录）：public。 点击部署进行第一次部署。 部署完成后打开网站查看效果。\n使用部署挂钩 在 Cloudflare Pages 项目的“设置 \u003e 构建与部署 \u003e 自动 git 部署”可以看到，每当发生新的提交都会触发自动部署（无论博客源仓库的哪一分支），而 Cloudflare 每月只提供了 500 次免费部署，为了尽可能合理使用部署，我们可以关掉自动部署，开启部署挂钩，并使用 GitHub Actions 来请求部署。\n在“设置 \u003e 构建与部署”\n自动 git 部署：点击“暂停部署”，来关闭自动部署。 部署挂钩：点击“添加部署挂钩”，挂钩名称任意。 在上面的 GitHub Actions 中新增步骤：\n注意将链接替换为自己的挂钩链接，或者和上面 token 一样使用环境变量。\nYAML 1 2 3 - name: 🚀 Deploy to Cloudflare Pages run: | curl -X POST \"https://api.cloudflare.com/...\" 这样的话，当 GitHub Pages 执行部署时，也会执行 Cloudflare Pages 的部署，不仅保证了站点内容的统一，也减少了一些不必要的构建。\n最终的 GitHub Actions 参考如下：\nYAML 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 name: Deploy Blog Pages # 触发条件 on: push: branches: - main paths-ignore: - \".github/**\" - \"scaffolds/**\" - \"source/_drafts/**\" # 任务 jobs: build-and-deploy: # 服务器环境：最新版 Ubuntu runs-on: ubuntu-latest steps: # 部署到 Cloudflare Pages - name: 🚀 Deploy to Cloudflare Pages run: | curl -X POST \"https://api.cloudflare.com/...\" - name: 📦 Checkout uses: actions/checkout@v2 # 生成静态文件 - name: 🔧 Install and Build run: | yarn yarn build # 部署到 GitHub Pages - name: 🚀 Deploy uses: JamesIves/github-pages-deploy-action@releases/v4 with: token: ${{secrets.PAT}} repository-name: KiyanYang/KiyanYang.github.io branch: main folder: public ",
  "wordCount" : "1839",
  "inLanguage": "zh",
  "image":"https://kiyanyang.github.io/posts/cdc6f5f3/index.webp","datePublished": "2021-12-18T19:17:06+08:00",
  "dateModified": "2023-03-04T18:11:41+08:00",
  "author":{
    "@type": "Person",
    "name": "Kiyan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kiyanyang.github.io/posts/cdc6f5f3/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kiyan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kiyanyang.github.io/img/favicon.webp"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kiyanyang.github.io/" accesskey="h" title="Kiyan&#39;s Blog (Alt + H)">Kiyan&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kiyanyang.github.io/archives/" title="归档">
                    <span><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 512 512"><path d="M32 32H480c17.7 0 32 14.3 32 32V96c0 17.7-14.3 32-32 32H32C14.3 128 0 113.7 0 96V64C0 46.3 14.3 32 32 32zm0 128H480V416c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V160zm128 80c0 8.8 7.2 16 16 16H336c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16z"/></svg>归档</span>
                </a>
            </li>
            <li>
                <a href="https://kiyanyang.github.io/tags/" title="标签">
                    <span><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 512 512"><path d="M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5V80C0 53.5 21.5 32 48 32H197.5c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>标签</span>
                </a>
            </li>
            <li>
                <a href="https://kiyanyang.github.io/categories/" title="分类">
                    <span><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 576 512"><path d="M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z"/></svg>分类</span>
                </a>
            </li>
            <li>
                <a href="https://kiyanyang.github.io/about/" title="关于">
                    <span><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 448 512"><path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg>关于</span>
                </a>
            </li>
            <li>
                <a href="https://kiyanyang.github.io/extras/" title="更多">
                    <span><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 448 512"><path d="M50.7 58.5L0 160H208V32H93.7C75.5 32 58.9 42.3 50.7 58.5zM240 160H448L397.3 58.5C389.1 42.3 372.5 32 354.3 32H240V160zm208 32H0V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192z"/></svg>更多</span>
                </a>
            </li>
            <li>
                <a href="https://kiyanyang.github.io/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 512 512"><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg>搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      使用 GitHub Actions 自动部署 Hexo 博客
    </h1>
    <div class="post-meta">

<ul class="page-meta">
    <li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 448 512"><path d="M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"/></svg><span title='2021-12-18 19:17:06 +0800 +0800'>2021-12-18 19:17</span></li>
    <li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 448 512"><path d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zM329 305c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-95 95-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L329 305z"/></svg><span title='2023-03-04 18:11:41 +0800 +0800'>2023-03-04 18:11</span></li>
    <li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 512 512"><path d="M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/></svg>4 分钟</li>
    <li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 512 512"><path d="M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"/></svg>1839 字</li>
    <li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 640 512"><path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H322.8c-3.1-8.8-3.7-18.4-1.4-27.8l15-60.1c2.8-11.3 8.6-21.5 16.8-29.7l40.3-40.3c-32.1-31-75.7-50.1-123.9-50.1H178.3zm435.5-68.3c-15.6-15.6-40.9-15.6-56.6 0l-29.4 29.4 71 71 29.4-29.4c15.6-15.6 15.6-40.9 0-56.6l-14.4-14.4zM375.9 417c-4.1 4.1-7 9.2-8.4 14.9l-15 60.1c-1.4 5.5 .2 11.2 4.2 15.2s9.7 5.6 15.2 4.2l60.1-15c5.6-1.4 10.8-4.3 14.9-8.4L576.1 358.7l-71-71L375.9 417z"/></svg>Kiyan</li>
</ul>


</div>
  </header> 
<figure class="entry-cover">
        <img loading="lazy" src="https://kiyanyang.github.io/posts/cdc6f5f3/index.webp" alt="GitHub Action 与 Hexo">
        
</figure>
<div class="toc">
    <button class="collapsed" type="button" aria-label="切换目录折叠状态" data-bs-toggle="collapse" data-bs-target="#collapse-toc">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
        <b>目录</b>
    </button>
    <div class="collapse " id="collapse-toc">
    <div class="inner"><ul>
            <li>
                <a href="#%e5%89%8d%e7%bd%ae%e6%9d%a1%e4%bb%b6" aria-label="前置条件">前置条件</a></li>
            <li>
                <a href="#%e5%88%9b%e5%bb%ba-github-pages" aria-label="创建 GitHub Pages">创建 GitHub Pages</a></li>
            <li>
                <a href="#%e5%88%9b%e5%bb%ba%e5%8d%9a%e5%ae%a2%e6%ba%90%e4%bb%a3%e7%a0%81%e4%bb%93%e5%ba%93" aria-label="创建博客源代码仓库">创建博客源代码仓库</a></li>
            <li>
                <a href="#%e7%bc%96%e5%86%99-github-actions" aria-label="编写 GitHub Actions">编写 GitHub Actions</a></li>
            <li>
                <a href="#%e9%83%a8%e7%bd%b2-cloudflare-pages" aria-label="部署 Cloudflare Pages">部署 Cloudflare Pages</a></li>
            <li>
                <a href="#%e4%bd%bf%e7%94%a8%e9%83%a8%e7%bd%b2%e6%8c%82%e9%92%a9" aria-label="使用部署挂钩">使用部署挂钩</a>
            </li>
        </ul>
    </div>
    </div>
</div>

  <div class="post-content"><p><strong>注意：本站已迁移至 Hugo。请访问本站「<a href="https://5c61b2c4.kiyanyang.pages.dev/posts/cdc6f5f3/">历史节点</a>」获取有关 Hexo 的内容。</strong></p>
<p>本文章通过使用 GitHub Actions 自动将博客源文件部署到 GitHub Pages。此外还可以在 Actions 中主动调用 Cloudflare Pages 部署挂钩，来避免一些不必要的部署。</p>
<h2 id="前置条件">前置条件<a hidden class="anchor" aria-hidden="true" href="#前置条件">#</a></h2>
<ul>
<li><a href="https://github.com/">GitHub</a> 账号</li>
<li><a href="https://www.cloudflare.com/zh-cn/">Cloudflare</a> 账号</li>
<li>Hexo 博客源文件</li>
</ul>
<h2 id="创建-github-pages">创建 GitHub Pages<a hidden class="anchor" aria-hidden="true" href="#创建-github-pages">#</a></h2>
<p>这里简要描述一下步骤：</p>
<ul>
<li>新建仓库 <code>&lt;user&gt;.github.io</code>，如果用户名包含大写字母，则必须改为小写字母。</li>
<li>选择仓库可见性为 <code>public</code>。</li>
<li>选择 Initialize this repository with a README（使用自述文件初始化此仓库）。</li>
<li>单击 Create repository（创建仓库）。</li>
</ul>
<p>详细步骤可以查看 GitHub 文档“<a href="https://docs.github.com/cn/pages/getting-started-with-github-pages">创建 GitHub Pages 站点</a>”。</p>
<h2 id="创建博客源代码仓库">创建博客源代码仓库<a hidden class="anchor" aria-hidden="true" href="#创建博客源代码仓库">#</a></h2>
<p>有两种方式：</p>
<ol>
<li>在 <code>&lt;user&gt;.gitbub.io</code> 仓库（即上面创建的 GitHub Pages 站点仓库），新建分支 <code>source</code>，然后将博客源文件上传至此分支。</li>
<li>新建仓库（此仓库的可见性可以设为 <code>private</code>），名称任意，比如 <code>&lt;user&gt;.gitbub.io.source</code>，然后将博客源文件上传至此分支。</li>
</ol>
<p>我选择了第二种方式（因为源仓库可以设为 <code>private</code>），后续代码也依据第二种方式，不过可以很容易修改得到第一种方式的代码。</p>
<h2 id="编写-github-actions">编写 GitHub Actions<a hidden class="anchor" aria-hidden="true" href="#编写-github-actions">#</a></h2>
<p>这里仅简单讲述一下相关的内容，更多关于 GitHub Actions 的内容请查看“<a href="https://docs.github.com/cn/actions">官方文档</a>”等。</p>
<p>在 Hexo 源文件的根目录，新建 <code>.github/workflows/&lt;fileName&gt;.yml</code> 文件，文件名任意，比如 <code>deploy-pages</code>。</p>



<div class="codeblock">
    <button type="button" aria-label="切换代码块折叠状态" data-bs-toggle="collapse" data-bs-target="#collapse-c001b2c800">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
        <b>YAML</b>
    </button>
    <div class="collapse show" id="collapse-c001b2c800"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># 任务名称：任意</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Deploy Blog Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 触发条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># push，也就是推送到仓库时才执行任务</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">push</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 分支，这里选择 main，也就是只有推送到 main 分支时才执行任务【可选】</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 忽略路径，也就是当只有这些路径发生变更时不会执行任务【可选】</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">paths-ignore</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;.github/**&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;scaffolds/**&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;source/_drafts/**&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 任务</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">jobs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 任务名称，任意</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">build-and-deploy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 服务器环境：最新版 Ubuntu</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 拉取</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">📦 Checkout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/checkout@v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 生成静态文件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">🔧 Install and Build</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          npm ci
</span></span></span><span class="line"><span class="cl"><span class="sd">          npm run build</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># 如果采用 yarn 进行包管理，则使用下面的代码</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#  yarn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#  yarn build</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 部署到 GitHub Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">🚀 Deploy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">JamesIves/github-pages-deploy-action@releases/v4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># GitHub 的 Personal access token</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l">${{secrets.PAT}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 更换为自己的 &lt;user&gt;/&lt;user&gt;.github.io</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">repository-name</span><span class="p">:</span><span class="w"> </span><span class="l">kiyanyang/kiyanyang.github.io</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 要部署到的分支</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">branch</span><span class="p">:</span><span class="w"> </span><span class="l">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 上一步生成的静态文件的地址</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">folder</span><span class="p">:</span><span class="w"> </span><span class="l">public</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>

<p>在“🚀 Deploy”步骤中，我们使用 Marketplace Actions 中的“<a href="https://github.com/marketplace/actions/deploy-to-github-pages">Deploy to GitHub Pages</a>”来部署到 GitHub Pages。其中需要 Personal access token，下面是获取步骤。</p>
<p>在“<a href="https://github.com/settings/tokens">Personal access tokens</a>”页面点击右上角的 <code>Generate new token</code> 来生成一个新的 token，在生成页面的 <code>Select scopes</code> 中选择 <code>workflow</code>。注意要将生成的 token 保存好，因为只会在生成时显示一次，之后将无法查看。</p>
<p>在博客源文件仓库的设置中打开 Secrets 页面。</p>
<p><img loading="lazy" src="./settings-secrets.webp" alt="Settings-Secrets"  />
</p>
<p>点击右上角 <code>new repository secret</code> 按钮来新建环境变量。</p>
<ul>
<li>变量的名称为 <code>PAT</code>（也可以为其他名称，但是要和“🚀 Deploy”步骤中的 <code>token</code> 的值内变量名称保持一致）。</li>
<li>变量的内容为上面生成的“Personal access tokens”。</li>
</ul>
<p>至此使用 GitHub Actions 自动将博客源文件部署到 GitHub Pages 就完成了，可以将自己将源文件上传查看效果。</p>
<h2 id="部署-cloudflare-pages">部署 Cloudflare Pages<a hidden class="anchor" aria-hidden="true" href="#部署-cloudflare-pages">#</a></h2>
<p>点击 <a href="https://pages.cloudflare.com">Cloudflare Pages</a>，转到 <code>Pages</code>（页面）&gt; <code>Create a project</code>（创建项目）。</p>
<ol>
<li>选择 GitHub 上你的博客源文件仓库。</li>
<li>配置和部署
<ul>
<li>Project name（项目名称）：任意，此名称即为 Cloudflare Pages 的前缀，比如我的是 kiyanyang。</li>
<li>Production branch（生产分支）：一般为 <code>main</code> 或 <code>master</code>，也就是你博客源文件所处的分支。</li>
<li>Framework perset（框架预设）：选择 <code>None</code>。</li>
<li>Build command（构建命令）：<code>npm run build</code> 或 <code>yarn build</code> 按需选择一个。</li>
<li>Build output directory（构建输出目录）：<code>public</code>。</li>
</ul>
</li>
<li>点击部署进行第一次部署。</li>
</ol>
<p>部署完成后打开网站查看效果。</p>
<h2 id="使用部署挂钩">使用部署挂钩<a hidden class="anchor" aria-hidden="true" href="#使用部署挂钩">#</a></h2>
<p>在 Cloudflare Pages 项目的“设置 &gt; 构建与部署 &gt; 自动 git 部署”可以看到，每当发生新的提交都会触发自动部署（无论博客源仓库的哪一分支），而 Cloudflare 每月只提供了 500 次免费部署，为了尽可能合理使用部署，我们可以关掉自动部署，开启部署挂钩，并使用 GitHub Actions 来请求部署。</p>
<ol>
<li>
<p>在“设置 &gt; 构建与部署”</p>
<ul>
<li>自动 git 部署：点击“暂停部署”，来关闭自动部署。</li>
<li>部署挂钩：点击“添加部署挂钩”，挂钩名称任意。</li>
</ul>
</li>
<li>
<p>在上面的 GitHub Actions 中新增步骤：</p>
<p>注意将链接替换为自己的挂钩链接，或者和上面 token 一样使用环境变量。</p>



<div class="codeblock">
    <button type="button" aria-label="切换代码块折叠状态" data-bs-toggle="collapse" data-bs-target="#collapse-c001b2c980">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
        <b>YAML</b>
    </button>
    <div class="collapse show" id="collapse-c001b2c980"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">🚀 Deploy to Cloudflare Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">    curl -X POST &#34;https://api.cloudflare.com/...&#34;</span><span class="w">    </span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>

</li>
</ol>
<p>这样的话，当 GitHub Pages 执行部署时，也会执行 Cloudflare Pages 的部署，不仅保证了站点内容的统一，也减少了一些不必要的构建。</p>
<p>最终的 GitHub Actions 参考如下：</p>



<div class="codeblock">
    <button type="button" aria-label="切换代码块折叠状态" data-bs-toggle="collapse" data-bs-target="#collapse-c001b2cb00">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
        <b>YAML</b>
    </button>
    <div class="collapse show" id="collapse-c001b2cb00"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Deploy Blog Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 触发条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">push</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">paths-ignore</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;.github/**&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;scaffolds/**&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;source/_drafts/**&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 任务</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">jobs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">build-and-deploy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 服务器环境：最新版 Ubuntu</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 部署到 Cloudflare Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">🚀 Deploy to Cloudflare Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          curl -X POST &#34;https://api.cloudflare.com/...&#34;</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">📦 Checkout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/checkout@v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 生成静态文件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">🔧 Install and Build</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          yarn
</span></span></span><span class="line"><span class="cl"><span class="sd">          yarn build</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 部署到 GitHub Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">🚀 Deploy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">JamesIves/github-pages-deploy-action@releases/v4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l">${{secrets.PAT}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">repository-name</span><span class="p">:</span><span class="w"> </span><span class="l">KiyanYang/KiyanYang.github.io</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">branch</span><span class="p">:</span><span class="w"> </span><span class="l">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">folder</span><span class="p">:</span><span class="w"> </span><span class="l">public</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>



  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kiyanyang.github.io/tags/guide/">教程</a></li>
      <li><a href="https://kiyanyang.github.io/tags/github-actions/">GitHub Actions</a></li>
      <li><a href="https://kiyanyang.github.io/tags/hexo/">Hexo</a></li>
    </ul>
    



<div class="license-box">
    <span class="license-title">
        <b>版权声明</b>
        <a rel="license" aria-label="版权" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 496 512"><path d="M245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93-22.13 0-33.22 14.61-33.22 43.84 0 23.57 9.21 43.84 33.22 43.84 14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98-22.6 0-73.96-10.32-73.96-77.05 0-58.69 43-77.06 72.63-77.06 30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93-22.14 0-33.22 14.61-33.22 43.84 0 23.55 9.23 43.84 33.22 43.84 14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98-22.69 0-73.96-9.87-73.96-77.05 0-58.67 42.97-77.06 72.63-77.06 30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248 129.93 0 248.44-100.87 248.44-248 0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81 0-105.42 85.43-203.27 203.72-203.27 112.53 0 202.82 89.46 202.82 203.26-.01 121.69-99.68 202.82-202.84 202.82z"/></svg><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 496 512"><path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3 3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7 3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256 0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8 103.2 0 202.8-81.1 202.8-202.8.1-113.8-90.2-203.3-202.8-203.3z"/></svg><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 496 512"><path d="M247.6 8C387.4 8 496 115.9 496 256c0 147.2-118.5 248-248.4 248C113.1 504 0 393.2 0 256 0 123.1 104.7 8 247.6 8zM55.8 189.1c-7.4 20.4-11.1 42.7-11.1 66.9 0 110.9 92.1 202.4 203.7 202.4 122.4 0 177.2-101.8 178.5-104.1l-93.4-41.6c-7.7 37.1-41.2 53-68.2 55.4v38.1h-28.8V368c-27.5-.3-52.6-10.2-75.3-29.7l34.1-34.5c31.7 29.4 86.4 31.8 86.4-2.2 0-6.2-2.2-11.2-6.6-15.1-14.2-6-1.8-.1-219.3-97.4zM248.4 52.3c-38.4 0-112.4 8.7-170.5 93l94.8 42.5c10-31.3 40.4-42.9 63.8-44.3v-38.1h28.8v38.1c22.7 1.2 43.4 8.9 62 23L295 199.7c-42.7-29.9-83.5-8-70 11.1 53.4 24.1 43.8 19.8 93 41.6l127.1 56.7c4.1-17.4 6.2-35.1 6.2-53.1 0-57-19.8-105-59.3-143.9-39.3-39.9-87.2-59.8-143.6-59.8z"/></svg><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" viewBox="0 0 496 512"><path d="M247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256 0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8 103.2 0 202.8-81.1 202.8-202.8.1-113.8-90.2-203.3-202.8-203.3zM137.7 221c13-83.9 80.5-95.7 108.9-95.7 99.8 0 127.5 82.5 127.5 134.2 0 63.6-41 132.9-128.9 132.9-38.9 0-99.1-20-109.4-97h62.5c1.5 30.1 19.6 45.2 54.5 45.2 23.3 0 58-18.2 58-82.8 0-82.5-49.1-80.6-56.7-80.6-33.1 0-51.7 14.6-55.8 43.8h18.2l-49.2 49.2-49-49.2h19.4z"/></svg></a>
    </span>
    <div class="license-meta">
        <ul>
            <li>作者：Kiyan</li>
            <li>链接：https://kiyanyang.github.io/posts/cdc6f5f3/</li>
            <li>许可：<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)</a></li>
        </ul>
    </div>
</div>

    
<nav class="paginav">
  <a class="prev" href="/posts/fdce5f9b/">
    <span class="title">« 上一页</span>
    <br>
    <span>VTK9.1.0 &#43; VS2022 &#43; Qt5.12 编译</span>
  </a>
  <a class="next" href="/posts/277e1260/">
    <span class="title">下一页 »</span>
    <br>
    <span>Hexo-Fluid 在目录的标题前增加光标</span>
  </a>
</nav>

  </footer>
<footer id="comment"><script>
    function getGiscusTheme() {
        return document.body.classList.contains("dark") ? "dark" : "light";
    }

    function setGiscusTheme() {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: { setConfig: { theme: getGiscusTheme() } } }, 'https://giscus.app');
    }

    const observer = new MutationObserver(_ => setGiscusTheme());
    observer.observe(document.body, { attributes: true, attributeFilter: ["class"] });

    document.addEventListener("DOMContentLoaded", () => {
        const giscusAttributes = {
            "src": "https://giscus.app/client.js",
            "data-repo": "KiyanYang/KiyanYang.github.io",
            "data-repo-id": "MDEwOlJlcG9zaXRvcnkzODQ2NDE5MTA=",
            "data-category": "Giscus",
            "data-category-id": "DIC_kwDOFu0rds4CUox8",
            "data-mapping": "pathname",
            "data-strict": "1",
            "data-reactions-enabled": "1",
            "data-emit-metadata": "0",
            "data-input-position": "bottom",
            "data-theme": getGiscusTheme(),
            "data-lang": "en",
            "data-loading": "lazy",
            "crossorigin": "anonymous",
            "async": "",
        };

        const giscusScript = document.createElement("script");
        Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
        document.getElementById("comment").appendChild(giscusScript);
    });
</script>

    <a href="#comment" aria-label="go to comment" title="Go to Comment (Alt + B)" class="top-link comment-link" id="comment-link" accesskey="b">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path d="M511.1 63.1v287.1c0 35.25-28.75 63.1-64 63.1h-144l-124.9 93.68c-7.875 5.75-19.12 .0497-19.12-9.7v-83.98h-96c-35.25 0-64-28.75-64-63.1V63.1c0-35.25 28.75-63.1 64-63.1h384C483.2 0 511.1 28.75 511.1 63.1z" />
        </svg>
    </a>
    <script>
        let comment = document.getElementById("comment");
        let btnToComment = document.getElementById("comment-link");
        document.addEventListener("scroll", function () {
            const e = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
            const s = comment.offsetTop - document.documentElement.scrollTop;
            if (s > e) {
                btnToComment.style.visibility = "visible";
                btnToComment.style.opacity = "1";
            } else {
                btnToComment.style.visibility = "hidden";
                btnToComment.style.opacity = "0";
            }
        });
    </script>
</footer>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://kiyanyang.github.io/">Kiyan&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
